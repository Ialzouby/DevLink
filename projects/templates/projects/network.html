{% extends "projects/base.html" %}

{% block content %}
<div class="network-container">

    <div class="search-bar-container d-flex justify-content-center mb-4">
        <form method="GET" action="{% url 'network' %}" class="search-bar-form d-flex">
            <input type="text" name="q" class="form-control me-2" placeholder="Search by username, grade level, or concentration" value="{{ request.GET.q }}">
            <button type="submit" class="btn btn-primary me-2">Search</button>
            <!-- Clear Filter Button -->
            <a href="{% url 'network' %}" class="btn btn-secondary">Clear</a>
        </form>
    </div>



    <div class="row">
        {% for user in users %}
        <div class="col-md-6">
            <a href="{% url 'profile' user.username %}" class="card-link">
                <div class="card">
                    <div class="profile-pic-container">
                        {% if user.userprofile.profile_picture %}
                            <img src="{{ user.userprofile.profile_picture|safe }}" alt="{{ user.username }}">
                        {% else %}
                            <img src="https://via.placeholder.com/100" alt="{{ user.username }}">
                        {% endif %}
                    </div>
                    <div class="user-info">
                        <h5>{{ user.username }}</h5>
                        <p>Grade Level: {{ user.userprofile.grade_level|default_if_none:"Not available" }}</p>
                        <p>Concentration: {{ user.userprofile.concentration|default_if_none:"Not available" }}</p>
                    </div>
                    
                    <!-- Badge for the top three users -->
                    {% if forloop.counter == 1 %}
                    <div class="badge-container">
                        <span class="badge first-badge">1st Place</span>
                    </div>
                    {% elif forloop.counter == 2 %}
                    <div class="badge-container">
                        <span class="badge second-badge">2nd Place</span>
                    </div>
                    {% elif forloop.counter == 3 %}
                    <div class="badge-container">
                        <span class="badge third-badge">3rd Place</span>
                    </div>
                    {% endif %}
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
